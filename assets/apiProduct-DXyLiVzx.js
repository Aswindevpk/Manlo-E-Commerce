import{s}from"./index-B8BJ-eIj.js";async function u({collectionSlug:e,searchQuery:o,filters:r,sortBy:n}){let t=s.from("product_search_view").select("product_name,product_id,price,brand,is_new,slug,images,is_new",{count:"exact"});e&&(t=t.or(`type.eq.${e},category.eq.${e}`)),t=t.ilike("product_name",`%${o}%`),r&&(r==null?void 0:r.length)>0&&r.forEach(a=>{a.values&&(t=t.in(a.field,a.values))}),n&&(t=t.order(n.field,{ascending:n.direction==="asc"}));const{data:i,error:c}=await t;if(c)throw console.error("Error fetching search results:",c),new Error("Could not fetch search results.");return i}async function f({isNew:e=!1,brand:o=null}){let r=s.from("product_search_view").select("product_name,product_id,price,brand,is_new,slug,images,is_new,category");e&&(r=r.eq("is_new",!0)),o&&(r=r.eq("brand",o));const{data:n,error:t}=await r.limit(10);if(t)throw console.error("Error fetching search results:",t),new Error("Could not fetch search results.");return n}async function l({productId:e}){const{data:o,error:r}=await s.from("product_variants").select("colors(id,name, hex_code)").eq("product_id",e);if(r||!o)throw console.error(r),new Error("Product not found!");return o.map(t=>t.colors).flat()}async function w({sizeCategoryId:e}){const{data:o,error:r}=await s.from("sizes").select("id,name").eq("category_id",e);if(r||!o)throw console.error(r),new Error("Product not found!");return o}async function _({productSlug:e}){if(!e)throw new Error("product does not exist");const{data:o,error:r}=await s.from("product_detail_view").select("*").eq("slug",e).single();if(r||!o)throw console.error(r),new Error("Product not found!");return o}async function p({variantId:e}){const{data:o,error:r}=await s.from("product_units").select("size_id").eq("variant_id",e);if(r)throw console.error(r),new Error("sizes not found!");return o.map(t=>t.size_id)}async function g({variantId:e,sizeId:o}){if(!o)throw new Error("size undefined");const{data:r,error:n}=await s.from("product_units").select("*").eq("variant_id",e).eq("size_id",o).single();if(n||!r)throw console.error(n),new Error("Product not found!");return r}async function h({productId:e,colorId:o}){const{data:r,error:n}=await s.from("product_variants").select(`
    slug,
    product_units!inner(id)
  `).eq("product_id",e).eq("color_id",o).limit(1,{foreignTable:"product_units"}).single();if(n||!r)throw console.error(n),new Error("Product not found!");return{slug:r.slug,unit_id:r.product_units[0].id}}export{h as a,w as b,p as c,g as d,_ as e,f,l as g,u as s};
