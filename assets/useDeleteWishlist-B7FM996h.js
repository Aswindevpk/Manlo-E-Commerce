import{s as t,e as n,g as a,V as o}from"./index-B8BJ-eIj.js";async function c({unitId:e,userId:r}){if(!r)throw new Error("User not logged in");if(!e)throw new Error("no product found");const{data:i,error:s}=await t.from("wishlist").insert([{user_id:r,product_unit_id:e}]);if(s)throw new Error(s.message);return i}async function u({unitId:e,userId:r}){if(!r)throw new Error("User not logged in");const{error:i}=await t.from("wishlist").delete().eq("user_id",r).eq("product_unit_id",e);if(i)throw new Error(i.message)}async function w({userId:e}){if(!e)return[];const{data:r,error:i}=await t.from("wishlist_item_view").select("*").eq("user_id",e);if(i)throw new Error(i.message);return r}async function f({userId:e,variationId:r}){if(!e||!r)return null;const{data:i,error:s}=await t.from("wishlist").select("*").eq("user_id",e).eq("product_unit_id",r).single();if(s&&s.code!=="PGRST116")throw new Error(s.message);return i}function h(){const e=n(),{mutate:r,isPending:i}=a({mutationFn:u,onSuccess:()=>{e.invalidateQueries({queryKey:["allWishlist"]}),e.invalidateQueries({queryKey:["wishlist"]}),o.success("Removed from wishlist!")},onError:()=>o.error("Failed to remove from wishlist")});return{removeFromWishlist:r,isRemoving:i}}export{c as A,f as G,w as a,h as u};
